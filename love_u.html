<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta de Amor - Rosa Realista Mejorada</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Dancing Script', cursive;
            background: linear-gradient(135deg, #fce4ec, #f8bbd9);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            cursor: pointer;
        }

        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Carta */
        .letter-container {
            position: relative;
            transition: all 1.5s ease;
        }

        .letter {
            width: 200px;
            height: 140px;
            background: linear-gradient(145deg, #ffffff, #f5f5f5);
            border: 3px solid #e91e63;
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(233, 30, 99, 0.3);
            transition: all 0.5s ease;
            transform-style: preserve-3d;
        }

        .letter:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(233, 30, 99, 0.4);
        }

        .letter-top {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(145deg, #ffffff, #f9f9f9);
            border-radius: 10px 10px 0 0;
            border-bottom: 2px solid #e91e63;
            transition: all 1s ease;
            transform-origin: bottom center;
            z-index: 2;
        }

        .letter-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(145deg, #fff0f3, #ffe1e6);
            border-radius: 0 0 10px 10px;
        }

        .letter.opening .letter-top {
            transform: rotateX(-180deg);
        }

        .letter-heart {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
            color: #e91e63;
            animation: heartbeat 2s infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
        }

        .click-instruction {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            color: #ad1457;
            font-size: 18px;
            font-weight: 600;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        /* Corazones flotantes */
        .floating-heart {
            position: absolute;
            font-size: 20px;
            color: #e91e63;
            pointer-events: none;
            animation: floatUp 3s ease-out forwards;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0) scale(0.5) rotate(0deg);
            }
            50% {
                opacity: 0.8;
                transform: translateY(-100px) scale(1) rotate(180deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-200px) scale(0.5) rotate(360deg);
            }
        }

        /* Rosa realista mejorada */
        .rose-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            transition: all 1.5s ease;
        }

        .rose-container.show {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .rose {
            width: 120px;
            height: 200px;
            position: relative;
        }

        .rose-flower {
            width: 120px;
            height: 120px;
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
        }

        /* PÃ©talos externos - Capa 1 */
        .outer-petal {
            position: absolute;
            border-radius: 80% 15% 55% 15%;
            background: radial-gradient(ellipse at 30% 40%, #ff69b4, #e91e63, #c2185b);
            box-shadow: 
                inset 2px 2px 6px rgba(255, 182, 193, 0.6),
                inset -2px -2px 6px rgba(139, 0, 63, 0.4),
                0 2px 8px rgba(233, 30, 99, 0.3);
            transform-origin: bottom center;
        }

        /* PÃ©talos externos grandes */
        .outer-petal1 { 
            width: 45px; height: 50px; 
            top: -5px; left: 37px; 
            transform: rotate(-30deg) scale(1.1);
            background: radial-gradient(ellipse at 25% 35%, #ff85c1, #ff1493, #c2185b);
        }
        .outer-petal2 { 
            width: 42px; height: 48px; 
            top: 5px; left: 65px; 
            transform: rotate(15deg);
            background: radial-gradient(ellipse at 35% 30%, #ff69b4, #e91e63, #ad1457);
        }
        .outer-petal3 { 
            width: 46px; height: 52px; 
            top: 25px; left: 70px; 
            transform: rotate(55deg) scale(1.05);
            background: radial-gradient(ellipse at 20% 45%, #ff85c1, #ff1493, #c2185b);
        }
        .outer-petal4 { 
            width: 44px; height: 49px; 
            top: 50px; left: 60px; 
            transform: rotate(95deg);
            background: radial-gradient(ellipse at 40% 25%, #ff69b4, #e91e63, #ad1457);
        }
        .outer-petal5 { 
            width: 47px; height: 51px; 
            top: 65px; left: 37px; 
            transform: rotate(140deg) scale(1.08);
            background: radial-gradient(ellipse at 30% 40%, #ff85c1, #ff1493, #c2185b);
        }
        .outer-petal6 { 
            width: 43px; height: 47px; 
            top: 55px; left: 10px; 
            transform: rotate(185deg);
            background: radial-gradient(ellipse at 25% 35%, #ff69b4, #e91e63, #ad1457);
        }
        .outer-petal7 { 
            width: 45px; height: 50px; 
            top: 30px; left: -5px; 
            transform: rotate(225deg) scale(1.06);
            background: radial-gradient(ellipse at 35% 30%, #ff85c1, #ff1493, #c2185b);
        }
        .outer-petal8 { 
            width: 42px; height: 48px; 
            top: 8px; left: 8px; 
            transform: rotate(270deg);
            background: radial-gradient(ellipse at 30% 40%, #ff69b4, #e91e63, #ad1457);
        }

        /* PÃ©talos medios - Capa 2 */
        .middle-petal {
            position: absolute;
            border-radius: 75% 20% 60% 20%;
            background: radial-gradient(ellipse at 35% 30%, #ffa0d4, #ff69b4, #e91e63);
            box-shadow: 
                inset 1px 1px 4px rgba(255, 192, 203, 0.7),
                inset -1px -1px 4px rgba(233, 30, 99, 0.5),
                0 1px 5px rgba(255, 105, 180, 0.4);
            transform-origin: bottom center;
        }

        .middle-petal1 { 
            width: 35px; height: 40px; 
            top: 12px; left: 42px; 
            transform: rotate(-15deg);
            background: radial-gradient(ellipse at 30% 35%, #ffb3d9, #ff69b4, #e91e63);
        }
        .middle-petal2 { 
            width: 33px; height: 38px; 
            top: 18px; left: 58px; 
            transform: rotate(25deg) scale(1.05);
            background: radial-gradient(ellipse at 40% 25%, #ffa0d4, #ff1493, #c2185b);
        }
        .middle-petal3 { 
            width: 36px; height: 41px; 
            top: 35px; left: 62px; 
            transform: rotate(70deg);
            background: radial-gradient(ellipse at 25% 40%, #ffb3d9, #ff69b4, #e91e63);
        }
        .middle-petal4 { 
            width: 34px; height: 39px; 
            top: 52px; left: 52px; 
            transform: rotate(115deg) scale(1.03);
            background: radial-gradient(ellipse at 35% 30%, #ffa0d4, #ff1493, #c2185b);
        }
        .middle-petal5 { 
            width: 37px; height: 42px; 
            top: 55px; left: 31px; 
            transform: rotate(155deg);
            background: radial-gradient(ellipse at 30% 35%, #ffb3d9, #ff69b4, #e91e63);
        }
        .middle-petal6 { 
            width: 33px; height: 38px; 
            top: 45px; left: 15px; 
            transform: rotate(200deg) scale(1.02);
            background: radial-gradient(ellipse at 40% 25%, #ffa0d4, #ff1493, #c2185b);
        }
        .middle-petal7 { 
            width: 35px; height: 40px; 
            top: 25px; left: 12px; 
            transform: rotate(245deg);
            background: radial-gradient(ellipse at 25% 40%, #ffb3d9, #ff69b4, #e91e63);
        }
        .middle-petal8 { 
            width: 34px; height: 39px; 
            top: 15px; left: 25px; 
            transform: rotate(285deg) scale(1.04);
            background: radial-gradient(ellipse at 35% 30%, #ffa0d4, #ff1493, #c2185b);
        }

        /* PÃ©talos internos - Capa 3 */
        .inner-petal {
            position: absolute;
            border-radius: 70% 25% 65% 25%;
            background: radial-gradient(ellipse at 40% 25%, #ffcceb, #ffa0d4, #ff69b4);
            box-shadow: 
                inset 1px 1px 3px rgba(255, 220, 237, 0.8),
                inset -1px -1px 3px rgba(255, 105, 180, 0.6),
                0 1px 3px rgba(255, 160, 212, 0.5);
            transform-origin: bottom center;
        }

        .inner-petal1 { 
            width: 26px; height: 32px; 
            top: 22px; left: 47px; 
            transform: rotate(-8deg);
            background: radial-gradient(ellipse at 35% 30%, #ffe0f0, #ffb3d9, #ff69b4);
        }
        .inner-petal2 { 
            width: 24px; height: 30px; 
            top: 26px; left: 58px; 
            transform: rotate(35deg) scale(1.08);
            background: radial-gradient(ellipse at 25% 40%, #ffcceb, #ffa0d4, #ff1493);
        }
        .inner-petal3 { 
            width: 27px; height: 33px; 
            top: 40px; left: 58px; 
            transform: rotate(80deg);
            background: radial-gradient(ellipse at 40% 25%, #ffe0f0, #ffb3d9, #ff69b4);
        }
        .inner-petal4 { 
            width: 25px; height: 31px; 
            top: 50px; left: 47px; 
            transform: rotate(125deg) scale(1.05);
            background: radial-gradient(ellipse at 30% 35%, #ffcceb, #ffa0d4, #ff1493);
        }
        .inner-petal5 { 
            width: 26px; height: 32px; 
            top: 48px; left: 33px; 
            transform: rotate(170deg);
            background: radial-gradient(ellipse at 35% 30%, #ffe0f0, #ffb3d9, #ff69b4);
        }
        .inner-petal6 { 
            width: 24px; height: 30px; 
            top: 38px; left: 22px; 
            transform: rotate(215deg) scale(1.03);
            background: radial-gradient(ellipse at 25% 40%, #ffcceb, #ffa0d4, #ff1493);
        }
        .inner-petal7 { 
            width: 25px; height: 31px; 
            top: 26px; left: 25px; 
            transform: rotate(260deg);
            background: radial-gradient(ellipse at 40% 25%, #ffe0f0, #ffb3d9, #ff69b4);
        }
        .inner-petal8 { 
            width: 26px; height: 32px; 
            top: 20px; left: 38px; 
            transform: rotate(300deg) scale(1.06);
            background: radial-gradient(ellipse at 30% 35%, #ffcceb, #ffa0d4, #ff1493);
        }

        /* PÃ©talos del centro - Capa 4 */
        .center-petal {
            position: absolute;
            border-radius: 60% 30% 70% 30%;
            background: radial-gradient(ellipse at 45% 20%, #fff0f8, #ffcceb, #ffa0d4);
            box-shadow: 
                inset 0.5px 0.5px 2px rgba(255, 235, 245, 0.9),
                inset -0.5px -0.5px 2px rgba(255, 160, 212, 0.7),
                0 0.5px 2px rgba(255, 204, 235, 0.6);
            transform-origin: bottom center;
        }

        .center-petal1 { 
            width: 18px; height: 24px; 
            top: 30px; left: 51px; 
            transform: rotate(0deg);
        }
        .center-petal2 { 
            width: 16px; height: 22px; 
            top: 32px; left: 58px; 
            transform: rotate(45deg) scale(1.1);
        }
        .center-petal3 { 
            width: 17px; height: 23px; 
            top: 42px; left: 58px; 
            transform: rotate(90deg);
        }
        .center-petal4 { 
            width: 18px; height: 24px; 
            top: 48px; left: 51px; 
            transform: rotate(135deg) scale(1.05);
        }
        .center-petal5 { 
            width: 16px; height: 22px; 
            top: 46px; left: 42px; 
            transform: rotate(180deg);
        }
        .center-petal6 { 
            width: 17px; height: 23px; 
            top: 38px; left: 35px; 
            transform: rotate(225deg) scale(1.08);
        }
        .center-petal7 { 
            width: 18px; height: 24px; 
            top: 32px; left: 38px; 
            transform: rotate(270deg);
        }
        .center-petal8 { 
            width: 16px; height: 22px; 
            top: 34px; left: 46px; 
            transform: rotate(315deg) scale(1.03);
        }

        /* Centro de la rosa */
        .rose-center {
            position: absolute;
            width: 16px;
            height: 16px;
            background: radial-gradient(circle at 30% 30%, #ffebf5, #ff69b4, #c2185b, #8b0047);
            border-radius: 50%;
            top: 52px;
            left: 52px;
            box-shadow: 
                inset 1px 1px 3px rgba(255, 235, 245, 0.8),
                inset -2px -2px 4px rgba(139, 0, 71, 0.6),
                0 1px 4px rgba(194, 24, 91, 0.5);
        }

        /* Tallo mejorado */
        .rose-stem {
            position: absolute;
            width: 8px;
            height: 120px;
            background: linear-gradient(to right, #2e7d2e, #228b22, #1a6b1a);
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 4px;
            box-shadow: 
                2px 0 4px rgba(0,0,0,0.3),
                inset 1px 0 2px rgba(76, 175, 80, 0.6),
                inset -1px 0 2px rgba(27, 94, 32, 0.4);
        }

        /* Hojas mejoradas */
        .rose-leaf {
            position: absolute;
            background: linear-gradient(45deg, #4caf50, #388e3c, #2e7d32);
            border-radius: 0 100% 0 100%;
            transform-origin: bottom center;
            box-shadow: 
                1px 1px 3px rgba(0,0,0,0.3),
                inset 1px 1px 2px rgba(129, 199, 132, 0.5),
                inset -1px -1px 2px rgba(46, 125, 50, 0.4);
        }

        .leaf1 {
            width: 28px;
            height: 38px;
            top: 115px;
            left: 22px;
            transform: rotate(-35deg);
            background: linear-gradient(45deg, #66bb6a, #4caf50, #388e3c);
        }

        .leaf2 {
            width: 25px;
            height: 35px;
            top: 135px;
            right: 22px;
            transform: rotate(35deg);
            background: linear-gradient(45deg, #4caf50, #388e3c, #2e7d32);
        }

        /* Espinas pequeÃ±as en el tallo */
        .rose-stem::before {
            content: '';
            position: absolute;
            width: 3px;
            height: 3px;
            background: linear-gradient(45deg, #2e7d32, #1b5e20);
            border-radius: 0 50% 50% 50%;
            top: 30px;
            left: -1px;
            transform: rotate(45deg);
            box-shadow: 
                0 40px 0 rgba(46, 125, 50, 0.8),
                0 70px 0 rgba(46, 125, 50, 0.6);
        }

        /* PÃ©talos que caen */
        .falling-petal {
            position: absolute;
            border-radius: 80% 15% 55% 15%;
            pointer-events: none;
            z-index: 1000;
        }

        .petal-pink1 {
            width: 15px;
            height: 18px;
            background: radial-gradient(ellipse at 30% 40%, #ff69b4, #e91e63, #c2185b);
            animation: fallPetal1 4s linear infinite;
        }

        .petal-pink2 {
            width: 12px;
            height: 16px;
            background: radial-gradient(ellipse at 35% 30%, #ffa0d4, #ff69b4, #e91e63);
            animation: fallPetal2 5s linear infinite;
        }

        .petal-pink3 {
            width: 14px;
            height: 17px;
            background: radial-gradient(ellipse at 25% 35%, #ffcceb, #ffa0d4, #ff1493);
            animation: fallPetal3 4.5s linear infinite;
        }

        @keyframes fallPetal1 {
            0% {
                opacity: 1;
                transform: translateY(-20px) translateX(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) translateX(50px) rotate(360deg);
            }
        }

        @keyframes fallPetal2 {
            0% {
                opacity: 1;
                transform: translateY(-20px) translateX(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) translateX(-30px) rotate(-360deg);
            }
        }

        @keyframes fallPetal3 {
            0% {
                opacity: 1;
                transform: translateY(-20px) translateX(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) translateX(20px) rotate(180deg);
            }
        }

        /* Mensaje personalizado */
        .personal-message {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%) scale(0);
            color: #ad1457;
            font-size: 22px;
            font-weight: 600;
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px 25px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(233, 30, 99, 0.3);
            border: 2px solid #ff69b4;
            opacity: 0;
            transition: all 1s ease;
            z-index: 1000;
        }

        .personal-message.show {
            transform: translateX(-50%) scale(1);
            opacity: 1;
        }

        /* Mensajes flotantes */
        .floating-message {
            position: absolute;
            color: #ad1457;
            font-size: 24px;
            font-weight: 600;
            pointer-events: none;
            animation: messageFloat 4s ease-out forwards;
            text-shadow: 2px 2px 4px rgba(255,255,255,0.8);
            z-index: 1000;
        }

        @keyframes messageFloat {
            0% {
                opacity: 0;
                transform: translateY(0) scale(0.5);
            }
            20% {
                opacity: 1;
                transform: translateY(-20px) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-150px) scale(0.8);
            }
        }

        .message-heart {
            position: absolute;
            font-size: 16px;
            color: #e91e63;
            pointer-events: none;
            animation: messageHeartFloat 4s ease-out forwards;
        }

        @keyframes messageHeartFloat {
            0% {
                opacity: 0;
                transform: translate(20px, 0) scale(0.3) rotate(0deg);
            }
            20% {
                opacity: 1;
                transform: translate(30px, -30px) scale(1) rotate(90deg);
            }
            100% {
                opacity: 0;
                transform: translate(50px, -120px) scale(0.5) rotate(360deg);
            }
        }

        .hidden {
            opacity: 0 !important;
            transform: scale(0) !important;
            pointer-events: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="letter-container" id="letterContainer">
            <div class="letter" id="letter">
                <div class="letter-top"></div>
                <div class="letter-bottom">
                    <div class="letter-heart">ðŸ’•</div>
                </div>
            </div>
            <div class="click-instruction">Haz clic en la carta</div>
        </div>

        <div class="rose-container" id="roseContainer">
            <div class="rose">
                <div class="rose-flower">
                    <!-- PÃ©talos exteriores - Capa 1 -->
                    <div class="outer-petal outer-petal1"></div>
                    <div class="outer-petal outer-petal2"></div>
                    <div class="outer-petal outer-petal3"></div>
                    <div class="outer-petal outer-petal4"></div>
                    <div class="outer-petal outer-petal5"></div>
                    <div class="outer-petal outer-petal6"></div>
                    <div class="outer-petal outer-petal7"></div>
                    <div class="outer-petal outer-petal8"></div>
                    
                    <!-- PÃ©talos medios - Capa 2 -->
                    <div class="middle-petal middle-petal1"></div>
                    <div class="middle-petal middle-petal2"></div>
                    <div class="middle-petal middle-petal3"></div>
                    <div class="middle-petal middle-petal4"></div>
                    <div class="middle-petal middle-petal5"></div>
                    <div class="middle-petal middle-petal6"></div>
                    <div class="middle-petal middle-petal7"></div>
                    <div class="middle-petal middle-petal8"></div>
                    
                    <!-- PÃ©talos internos - Capa 3 -->
                    <div class="inner-petal inner-petal1"></div>
                    <div class="inner-petal inner-petal2"></div>
                    <div class="inner-petal inner-petal3"></div>
                    <div class="inner-petal inner-petal4"></div>
                    <div class="inner-petal inner-petal5"></div>
                    <div class="inner-petal inner-petal6"></div>
                    <div class="inner-petal inner-petal7"></div>
                    <div class="inner-petal inner-petal8"></div>
                    
                    <!-- PÃ©talos del centro - Capa 4 -->
                    <div class="center-petal center-petal1"></div>
                    <div class="center-petal center-petal2"></div>
                    <div class="center-petal center-petal3"></div>
                    <div class="center-petal center-petal4"></div>
                    <div class="center-petal center-petal5"></div>
                    <div class="center-petal center-petal6"></div>
                    <div class="center-petal center-petal7"></div>
                    <div class="center-petal center-petal8"></div>
                    
                    <!-- Centro -->
                    <div class="rose-center"></div>
                </div>
                <div class="rose-stem"></div>
                <div class="rose-leaf leaf1"></div>
                <div class="rose-leaf leaf2"></div>
            </div>
        </div>

        <div class="personal-message" id="personalMessage">
            Con cariÃ±o de parte de un dibujito enamorado xd
        </div>
    </div>

    <script>
        const letter = document.getElementById('letter');
        const letterContainer = document.getElementById('letterContainer');
        const roseContainer = document.getElementById('roseContainer');
        const personalMessage = document.getElementById('personalMessage');
        const container = document.querySelector('.container');
        
        let letterOpened = false;
        let roseVisible = false;
        let petalsInterval;

        const messages = [
            "Eres hermosa",
            "Tu luz es Ãºnica",
            "Contigo, todo florece",
            "Eres magia pura",
            "Tu sonrisa ilumina mi mundo",
            "Eres un regalo del cielo",
            "Tu belleza es infinita",
            "Contigo el tiempo se detiene",
            "Eres mi estrella mÃ¡s brillante",
            "Tu corazÃ³n es puro oro",
            "Eres la melodÃ­a de mi alma",
            "Tu esencia es divina",
            "Eres mi inspiraciÃ³n diaria",
            "Tu amor es mi fortaleza",
            "Eres perfecta tal como eres",
            "Tu presencia es un milagro",
            "Eres la respuesta a mis oraciones",
            "Tu amor hace que todo tenga sentido",
            "Eres mi razÃ³n de ser",
            "Tu belleza trasciende lo fÃ­sico"
        ];

        // Abrir carta
        letter.addEventListener('click', function(e) {
            e.stopPropagation();
            if (!letterOpened) {
                openLetter();
            }
        });

        function openLetter() {
            letterOpened = true;
            letter.classList.add('opening');
            
            // Crear corazones que salen de la carta
            setTimeout(() => {
                createHeartsFromLetter();
            }, 500);

            // Mostrar rosa despuÃ©s de 2 segundos
            setTimeout(() => {
                showRose();
            }, 2000);

            // Ocultar carta despuÃ©s de 3 segundos
            setTimeout(() => {
                hideLetter();
            }, 3000);

            // Mostrar mensaje personalizado despuÃ©s de 4 segundos
            setTimeout(() => {
                showPersonalMessage();
            }, 4000);

            // Comenzar pÃ©talos que caen despuÃ©s de 3.5 segundos
            setTimeout(() => {
                startFallingPetals();
            }, 3500);
        }

        function createHeartsFromLetter() {
            const letterRect = letter.getBoundingClientRect();
            const letterCenterX = letterRect.left + letterRect.width / 2;
            const letterCenterY = letterRect.top + letterRect.height / 2;

            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'floating-heart';
                    heart.innerHTML = 'ðŸ’–';
                    
                    const angle = (i * 45) * Math.PI / 180;
                    const distance = 30;
                    const startX = letterCenterX + Math.cos(angle) * distance;
                    const startY = letterCenterY + Math.sin(angle) * distance;
                    
                    heart.style.left = startX + 'px';
                    heart.style.top = startY + 'px';
                    
                    document.body.appendChild(heart);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 3000);
                }, i * 200);
            }
        }

        function showRose() {
            roseContainer.classList.add('show');
            roseVisible = true;
        }

        function hideLetter() {
            letterContainer.classList.add('hidden');
        }

        function showPersonalMessage() {
            personalMessage.classList.add('show');
        }

        function startFallingPetals() {
            const roseRect = roseContainer.getBoundingClientRect();
            const roseX = roseRect.left + roseRect.width / 2;
            const roseY = roseRect.top + 50;

            petalsInterval = setInterval(() => {
                createFallingPetal(roseX, roseY);
            }, 1500);
        }

        function createFallingPetal(startX, startY) {
            const petal = document.createElement('div');
            const petalTypes = ['petal-pink1', 'petal-pink2', 'petal-pink3'];
            const randomType = petalTypes[Math.floor(Math.random() * petalTypes.length)];
            
            petal.className = `falling-petal ${randomType}`;
            petal.style.left = (startX + (Math.random() - 0.5) * 60) + 'px';
            petal.style.top = startY + 'px';
            
            document.body.appendChild(petal);
            
            setTimeout(() => {
                petal.remove();
            }, 5000);
        }

        // InteracciÃ³n global para mensajes
        document.addEventListener('click', function(e) {
            if (roseVisible && !e.target.closest('.letter-container')) {
                createMessage(e.clientX, e.clientY);
            }
        });

        function createMessage(x, y) {
            const message = document.createElement('div');
            message.className = 'floating-message';
            message.textContent = messages[Math.floor(Math.random() * messages.length)];
            message.style.left = x + 'px';
            message.style.top = y + 'px';
            
            document.body.appendChild(message);
            
            // Crear corazÃ³n acompaÃ±ante
            const heart = document.createElement('div');
            heart.className = 'message-heart';
            heart.innerHTML = 'ðŸ’•';
            heart.style.left = x + 'px';
            heart.style.top = y + 'px';
            
            document.body.appendChild(heart);
            
            // Limpiar despuÃ©s de la animaciÃ³n
            setTimeout(() => {
                message.remove();
                heart.remove();
            }, 4000);
        }
    </script>
</body>
</html>